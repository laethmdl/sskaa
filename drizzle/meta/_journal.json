{
  "version": "1",
  "migrations": [
    {
      "tag": "0000_init",
      "sql": "CREATE TABLE IF NOT EXISTS \"users\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"username\" TEXT NOT NULL,\n    \"password\" TEXT NOT NULL,\n    \"name\" TEXT NOT NULL,\n    \"email\" TEXT,\n    \"role\" TEXT DEFAULT 'user'\n);\n\nCREATE TABLE IF NOT EXISTS \"workplaces\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"name\" TEXT NOT NULL,\n    \"description\" TEXT\n);\n\nCREATE TABLE IF NOT EXISTS \"job_titles\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"title\" TEXT NOT NULL,\n    \"description\" TEXT,\n    \"grade\" INTEGER NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS \"educational_qualifications\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"name\" TEXT NOT NULL,\n    \"description\" TEXT,\n    \"level\" INTEGER NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS \"employees\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"employeeNumber\" TEXT NOT NULL,\n    \"firstName\" TEXT NOT NULL,\n    \"lastName\" TEXT NOT NULL,\n    \"fullName\" TEXT NOT NULL,\n    \"hiringDate\" TEXT NOT NULL,\n    \"currentGrade\" INTEGER NOT NULL,\n    \"email\" TEXT,\n    \"phoneNumber\" TEXT,\n    \"dateOfBirth\" TEXT,\n    \"gender\" TEXT,\n    \"address\" TEXT,\n    \"workplaceId\" INTEGER,\n    \"jobTitleId\" INTEGER,\n    \"educationalQualificationId\" INTEGER,\n    \"status\" TEXT DEFAULT 'active',\n    \"retirementDate\" TEXT\n);\n\nCREATE TABLE IF NOT EXISTS \"appreciations\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"employeeId\" INTEGER NOT NULL REFERENCES \"employees\"(\"id\"),\n    \"title\" TEXT NOT NULL,\n    \"description\" TEXT NOT NULL,\n    \"type\" TEXT NOT NULL,\n    \"date\" TEXT NOT NULL,\n    \"issuedBy\" TEXT NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS \"allowance_promotions\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"employeeId\" INTEGER NOT NULL REFERENCES \"employees\"(\"id\"),\n    \"type\" TEXT NOT NULL,\n    \"dueDate\" TEXT NOT NULL,\n    \"status\" TEXT DEFAULT 'pending',\n    \"notes\" TEXT,\n    \"processedAt\" TIMESTAMP,\n    \"processedBy\" INTEGER REFERENCES \"users\"(\"id\")\n);\n\nCREATE TABLE IF NOT EXISTS \"notifications\" (\n    \"id\" SERIAL PRIMARY KEY,\n    \"userId\" INTEGER REFERENCES \"users\"(\"id\"),\n    \"title\" TEXT NOT NULL,\n    \"message\" TEXT NOT NULL,\n    \"type\" TEXT NOT NULL,\n    \"isRead\" BOOLEAN DEFAULT false,\n    \"createdAt\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"relatedId\" INTEGER,\n    \"relatedType\" TEXT\n);\n\n-- إنشاء مستخدم إداري افتراضي\nINSERT INTO \"users\" (username, password, name, email, role)\nVALUES ('admin', 'admin123', 'مدير النظام', 'admin@example.com', 'admin')\nON CONFLICT (username) DO NOTHING;"
    }
  ]
}